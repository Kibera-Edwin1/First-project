<!DOCTYPE html>
<html>
    <head>
        <title>viewDoctors</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h2>View Doctors</h2>
        <form action="/viewDoctors" method="POST" name="viewDoctors">
            <div class="view">
                <table>
                    <tr>
                        <th>Doctor ID</th>
                        <th>Doctor Name</th>
                        <th>Phone Number</th>
                        <th>Email</th>
                        <th>Speciality</th>
                        <th>Date Employed</th>
                    </tr>
                     <tbody id="dataArea"></tbody>
                </table>
            </div>
        </form>
        <script>
            function getData(){
                fetch ('/viewDoctors')

                .then ( response => {
                    return response.json();
                })


                .then(data=>{
                    console.log(data);
                    let html="";
                    if(data.length>0){
                        data.map((row)=>{
                            html+=`
                            <tr>
                                <td>${row._id}</td>
                                <td>${row.doctorName}</td>
                                <td>${row.phoneNumber}</td>
                                <td>${row.email}</td>
                                <td>${row.speciality}</td>
                                <td>${row.dateEmployed}</td>
                               
                                </tr>
                            `;
                        });
                    }else{
                        html="<tr>td colspan='4' class='text-center'>No Data Found</td></tr>";
                    }

                    document.getElementById("dataArea").innerHTML=html;
                });
            }
            getData();
        </script>
    </body>
</html>
